0614 할 일

url imgPath 적용

서버에서 예매내역, 후기 게시글 전송하는 부분 작성
--> 마이페이지 예매내역 서버 부분 작성
--> 마이페이지 예매내역 클라이언트 html 수정

소켓 적용하는 부분 한 번 해보기<<해야 함



------------------------------------------------------------------
 
const reviewBoard = await ReviewBoard.findAll({
            where: { user_id: primaryKey },
            include: [
                {
                    model: ReviewBoardLike,
                    required: false
                },
            ],
            attributes: {
                include: [[sequelize.literal('(SELECT COUNT(*) FROM ReviewBoardLikes WHERE ReviewBoardLikes.reviewboard_id = ReviewBoard.id)'), 'likes']],
            },
        });

        const reservedList = await ReservedList.findAll({ where: { user_id: primaryKey }, include: [{ model: Show }] });



reservedList의 show_id와 reviewBoard의 show_id가 같으면 하나의 객체 혹은 배열에 담아서 reservedlist와 reviewboard를 한 객체나 배열에 담아오게 하고 싶은데 어떻게 해야할까??



-----------
        let reservedList = await ReservedList.findAll({ where: { user_id: primaryKey }, include: [{ model: Show }] });

const reviewBoard = await ReviewBoard.findAll({
            where: { user_id: primaryKey },
            include: [
                {
                    model: ReviewBoardLike,
                    required: false
                },
            ],
            attributes: {
                include: [[sequelize.literal('(SELECT COUNT(*) FROM ReviewBoardLikes WHERE ReviewBoardLikes.reviewboard_id = ReviewBoard.id)'), 'likes']],
            },
        });



reservedList.map((reserved)=>{
            let reservedItem = {};
            const board = reviewBoard.find((board)=>{
                return reserved.dataValues.show_id == board.dataValues.show_id;
            });
            reservedItem.reservedList = reserved.dataValues;
            if (board == null) {
                reservedItem.reviewBoard = null;
            } else {
                reservedItem.reviewBoard = board.dataValues;
            }
            // console.log(reservedItem);
            return reservedItem;
        });


왜 reservedList를 출력하면 reservedItem이 안나올까..?